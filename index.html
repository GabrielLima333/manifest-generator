<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="title" content="Manifest Generator">
	<meta name="description" content="A basic manifest generator for Minecraft Bedrock add-ons.">
	<meta name="author" content="Mokusei, Gabriel Aplok">
	<title>Manifest Generator</title>

	<!-- Bootstrap core CSS -->
	<link href="assets/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<div class="col-lg-8 mx-auto p-3 py-md-5">

		<header class="d-flex align-items-center pb-3 mb-5 border-bottom">
			<a href="https://mokuseidev.github.io/manifest-generator/" class="d-flex align-items-center text-dark text-decoration-none">
				<span class="fs-4">Manifest Generator</span>
			</a>
		</header>

		<main>
			<input type="text" id="name" placeholder="Pack Name" class="form-control" />
			<br />
			<input type="text" id="description" placeholder="Pack Description" class="form-control" />
			<br />
			<input type="text" id="version" placeholder="Pack Version" value="1, 0, 0" class="form-control" />
			<br />
			<select class="form-control" id="type">
				<option selected value="resources">Resources Pack</option>
				<option value="data">Behavior Pack</option>
			</select>
			<br />
			<button type="button" id="generate" class="btn btn-primary">Generate Manifest</button>
			<br />
			<br />
			<textarea class="form-control" id="output" rows="4"></textarea>
			<br />
			<center>
				<button type="button" id="copyToClipboard" class="btn btn-secondary">Copy to Clipboard</button>
				<button type="button" id="downloadFile" class="btn btn-secondary">Download File</button>
			</center>
		</main>

		<footer class="pt-5 my-5 text-muted border-top">
			<span class="site-footer-owner">Created by <a href="https://twitter.com/MokuseiDev">Mokusei</a>.</span>
		</br>
		<span class="site-footer-credits">This site is not affiliated with Mojang Studios.</span>
	</footer>
</div>

<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/FileSaver.js"></script>

<script>
	uuidv4 = function() {
		return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
			var r = Math.random() * 16 | 0,
			v = c == 'x' ? r: (r & 0x3 | 0x8);
			return v.toString(16);
		});
	};

	document.getElementById("generate").addEventListener("click", () => {
		var code = `{
		"format_version": 2,
		"header": {
		"name": "${document.getElementById("name").value}",
		"description": "${document.getElementById("description").value}",
		"uuid": "${uuidv4()}",
		"version": [${document.getElementById("version").value}],
		"min_engine_version": [1, 16, 0]
		},
		"modules": [
		{
		"type": "${(document.getElementById("type").value)}",
		"uuid": "${uuidv4()}",
		"version": [${document.getElementById("version").value}]
		}
		]
		}`;

		document.getElementById("output").value = code;
	});

	document.getElementById("copyToClipboard").addEventListener("click", () => {
		document.getElementById("output").select();
		document.getElementById("output").setSelectionRange(0, document.getElementById("output").value.length);
		document.execCommand("copy");
	});

	document.getElementById("downloadFile").addEventListener("click", () => {
		var f = document.getElementById("output").value;
		f = new Blob([f], {type: "text/plain;charset=utf-8"});
		var c = document.createElement("a");
		c.download = "manifest.json";
		c.innerHTML = "Save";
		null != window.webkitURL ? c.href = window.webkitURL.createObjectURL(f) : (c.href = window.URL.createObjectURL(f), c.onclick = destroyClickedElement, c.style.display = "none", document.body.appendChild(c));
		c.click();
	});
</script>
</body>
</html>